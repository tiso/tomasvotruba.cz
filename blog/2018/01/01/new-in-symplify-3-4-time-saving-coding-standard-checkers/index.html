<!DOCTYPE html>
<html lang="en">
<head>
    <title>New in Symplify 3: 4 Time-saving Coding Standard Checkers | Tomas Votruba</title>
    <meta charset="utf-8">
    <meta name="robots" content="index, follow">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">


    <link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">

    <link href="/assets/font-awesome/css/font-awesome.min.css?v=1.3" rel="stylesheet" type="text/css">

    <link href="/assets/bootstrap/bootstrap.min.css?v=1.3" rel="stylesheet" type="text/css">

    <link href="/assets/css/style.css?v=1.6" rel="stylesheet" type="text/css">

</head>
    <link href="/assets/prism/prism.css?v=0.1" rel="stylesheet" type="text/css">
    <body>
        <!-- post_id: 70 -->

<div class="hidden-sm-down">
    <nav class="navbar">
        <div class="container-fluid">
            <ul>
                <li id="logo">
                    Tomas Votruba
                </li>
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li>
                    <a href="/mentoring-and-lectures/">Mentoring & Lectures</a>
                </li>
                <li>
                    <a href="/talks/">Talks</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/contact/">Contact</a>
                </li>
            </ul>
        </div>
    </nav>
</div>

<div class="hidden-md-up">
    <nav class="navbar" id="mobile-menu">
        <div class="container">
            <a href="/" class="col-3 col-sm-3 active">
                <em class="fa fa-book"></em>
                <br>
                PHP Blog
            </a>
            <a href="/mentoring-and-lectures/" class="col-3 col-sm-3">
                <em class="fa fa-graduation-cap"></em>
                <br>
                Lectures
            </a>
            <a href="/about/" class="col-3 col-sm-3">
                <em class="fa fa-id-badge"></em>
                <br>
                About
            </a>
            <a href="/contact/" class="col-3 col-sm-3">
                <em class="fa fa-phone"></em>
                <br>
                Contact
            </a>
        </div>
    </nav>
</div>

        <div class="mainContent">
    <div class="container-fluid" id="post">
        <h1 id="new-in-symplify-3-4-time-saving-coding-standard-checkers"><a href="#new-in-symplify-3-4-time-saving-coding-standard-checkers">New in Symplify 3: 4 Time-saving Coding Standard Checkers</a></h1>

<ul class="list-inline post-metadata">
    <li class="list-inline-item mr-3">
        <em class="fa fa-clock-o fa-fw"></em>
        <strong>4 min</strong>
    </li>

    <li class="list-inline-item mr-3">
        <em class="fa fa-calendar fa-fw"></em>
        <time datetime="2018-01-Mon">Monday, January 1, 2018</time>
    </li>

        <li class="list-inline-item mr-3">
            <em class="fa fa-fw fa-comments"></em>
            <a href="https://www.tomasvotruba.cz/blog/2018/01/01/new-in-symplify-3-4-time-saving-coding-standard-checkers/#disqus_thread">X</a> comments
        </li>

        <li class="list-inline-item">
            <em class="fa fa-fw fa-pencil"></em>
            <a href="https://github.com/TomasVotruba/tomasvotruba.cz/edit/master/source/_posts/2018/2018-01-01-new-in-symplify-3-4-time-saving-coding-standard-checkers.md">Typo? Fix me please</a>
        </li>

</ul>



        <div class="card">
            <div class="card-body">
                Coding Standard in Symplify 3 brings <strong>checkers build from practical use in PHPStorm</strong>. It can do lot of work for you, like add getters, remove trailing spaces, but has still some room for automation and improvement.
<br>
I already wrote about <a href="/blog/2017/12/17/new-in-symplify-3-doc-block-cleaner-fixer/">doc block cleaner fixer</a> and here 4 more checkers, <strong>that saves you from monkey-typing and let you focus on algorithms</strong>.
            </div>
        </div>

        
<p>Starting with the simple checkers and moving to those, which save you even hours of manual work.</p>
<h2 id="1-absolutely-require-and-include"><a href="#1-absolutely-require-and-include">1. Absolutely Require and Include</a></h2>
<p><a href="https://github.com/Symplify/Symplify/pull/385" class="btn btn-dark btn-sm mb-3 mt-2">
<em class="fa fa-github"></em>
&nbsp;
Check the pull-request
</a></p>
<p>You probably recognize this:</p>
<pre><code class="language-php">require 'vendor/autoload.php';</code></pre>
<p><strong>Why is this bad?</strong> It promotes relative paths by default, supports magic path resolving and can cause errors, because we expects existing file by default. You can easily end-up in ambiguous file paths like:</p>
<pre><code class="language-php">var_dump($relativeFile);
"/var/path/fileName.php"
# or
"/var//path/fileName.php"
# or
"/varpath/fileName.php"</code></pre>
<p>Of course there are cases when using absolute paths is not suitable, like templates in Symfony application, but <strong>when we know the absolute path we should prefer it</strong>:</p>
<pre><code class="language-diff">-require 'vendor/autoload.php';
+require __DIR__.'/vendor/autoload.php';</code></pre>
<p>And that's what this checker does for you:</p>
<pre><code class="language-yaml"># easy-coding-standard.neon
checkers:
  - Symplify\CodingStandard\Fixer\ControlStructure\RequireFollowedByAbsolutePathFixer</code></pre>
<p><br></p>
<h2 id="2-empty-line-after-code-declare-strict-types-1-code"><a href="#2-empty-line-after-code-declare-strict-types-1-code">2. Empty Line after <code>declare(strict_types=1)</code></a></h2>
<p><a href="https://github.com/Symplify/Symplify/pull/443" class="btn btn-dark btn-sm mb-3 mt-2">
<em class="fa fa-github"></em>
&nbsp;
Check the pull-request
</a></p>
<p>The next one started as issue <a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer/issues/1793">PHP CS Fixer in January 2016 (if not earlier)</a>. The story <a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer/issues/2062">continues in next issue</a>, but final fixer is not in near sight.</p>
<img src="/assets/images/posts/2018/symplify-3-checkers/long-time.png" class="img-thumbnail">
<p>Why all these issues? Official fixer modifies code like this:</p>
<pre><code class="language-diff">-&lt;?php
+&lt;?php declare(strict_types=1);
-
 namespace Abc;</code></pre>
<p>Which is not what we want.</p>
<p><code>BlankLineAfterStrictTypesFixer</code> fixer was needed so <strong>EasyCodingStandard could refactor open-source packages without any manual work</strong>:</p>
<ul>
<li>see <a href="https://github.com/cpliakas/git-wrapper/pull/137/files">cpliakas/git-wrapper PHP 7 pull-request</a></li>
<li>or <a href="https://github.com/phpDocumentor/ReflectionDocBlock/pull/137/files">phpDocumentor/ReflectionDocBlock PHP 7  pull-request</a></li>
</ul>
<p>When the official fixer is finished, I'd be happy to use it and recommend it. But <strong>right now you can use</strong>:</p>
<pre><code class="language-yaml"># easy-coding-standard.neon
checkers:
  - Symplify\CodingStandard\Fixer\Strict\BlankLineAfterStrictTypesFixer</code></pre>
<p>Which helps official fixer to keep the space:</p>
<pre><code class="language-diff">-&lt;?php
+&lt;?php declare(strict_types=1);

 namespace Abc;</code></pre>
<h2 id="3-one-way-to-use-namespace-imports"><a href="#3-one-way-to-use-namespace-imports">3. One Way To Use Namespace Imports</a></h2>
<p><a href="https://github.com/Symplify/Symplify/pull/421" class="btn btn-dark btn-sm mb-3 mt-2">
<em class="fa fa-github"></em>
&nbsp;
Check the pull-request
</a></p>
<p>What do you think about this?</p>
<img src="/assets/images/posts/2018/symplify-3-checkers/import-fixer.png" class="img-thumbnail">
<p><em>Import class</em> is great PHPStorm feature. It sometimes does only partial imports, sometimes is unable to resolve conflict of 2 <code>SameClass</code> names and it still requires your time and attention to work.</p>
<p>If you don't care about this, your code can look like this - with 3 way to do 1 thing:</p>
<pre><code class="language-php">&lt;?php

namespace SomeNamespace;

use SubNamespace\PartialNamespace;

final class SomeClass extends \SubNamespace\PartialNamespace\AnotherClass
{
    public function getResult(): \ExternalNamespace\Result
    {
        $someOtherClass = new PartialNamespace\SomeOtherClass;
        // ...
    }
}</code></pre>
<p><strong>If you do care</strong> - which is probably why you're reading this post - you'd prefer code like this:</p>
<pre><code class="language-diff"> &lt;?php

 namespace SomeNamespace;

-use SubNamespace\PartialNamespace;
+use SubNamespace\PartialNamespace\AnotherClass
+use ExternalNamespace\Result;
+use SubNamespace\PartialNamespace\SomeOtherClass;

-final class SomeClass extends \SubNamespace\PartialNamespace\AnotherClass
+final class SomeClass extends AnotherClass
 {
-    public function getResult(): \ExternalNamespace\Result
+    public function getResult(): Result
     {
-        $someOtherClass = new PartialNamespace\SomeOtherClass;
+        $someOtherClass = new SomeOtherClass;
         // ...
     }
 }</code></pre>
<p>= <strong>1 way to do 1 thing</strong></p>
<p>(Don't worry about spacing after/before use statements and their order - your default PSR-2 set probably already handles that.)</p>
<p><br></p>
<p>Eager to try? Here it is:</p>
<pre><code class="language-yaml"># easy-coding-standard.neon
checkers:
    - Symplify\CodingStandard\Fixer\Import\ImportNamespacedNameFixer</code></pre>
<h2 id="4-possible-unused-public-method"><a href="#4-possible-unused-public-method">4. Possible Unused Public Method</a></h2>
<p><a href="https://github.com/Symplify/Symplify/pull/466" class="btn btn-dark btn-sm mb-3 mt-2">
<em class="fa fa-github"></em>
&nbsp;
Check the pull-request
</a></p>
<p>If you create method <strong>to be used in your code only and available as service</strong> - no matter if open-source or closed-source - you might end-up with many public methods. Your application or packages grows, there are some refactoring going on, even few deprecations.</p>
<p>Same happened with <a href="https://github.com/Symplify/Symplify">Symplify</a>. Eventually, I came across <strong>unused public methods</strong> that contained lot of unused code. A code I hade to test and maintain. There is already <a href="https://github.com/slevomat/coding-standard#slevomatcodingstandardclassesunusedprivateelements-">Sniff from Slevomat</a> for unused private elements (great job guys!) - which inspired me to question:</p>
<h3 id="could-a-sniff-spot-unused-public-methods"><a href="#could-a-sniff-spot-unused-public-methods">Could a Sniff Spot Unused Public Methods?</a></h3>
<p>Consider this checker <strong>as adviser, who helps to you to spot weak points</strong> and makes rest of your code more valuable and consistent, since it contains only what it needs.</p>
<p>This checkers <strong>requires EasyCodingStandard</strong> to run - it uses its &quot;double run&quot; feature:</p>
<ul>
<li>on first run checker finds all public method names and all method calls</li>
<li>on second run it reports those public method names, that were not called</li>
</ul>
<p>It helps you to spot spots like <a href="https://github.com/Symplify/Symplify/pull/466/commits/3f08ed1fb2f22dd6c4a7b46d680adf4ab5a0907d">this</a>, <a href="https://github.com/Symplify/Symplify/pull/466/commits/fa21855694d933716117b2a2db13acac55b86d69">this</a> or <a href="https://github.com/Symplify/Symplify/pull/552/commits/2df9cbab657a701acb2163f7321216fb782fcf35">this</a>.</p>
<h3 id="run-it-occasionally-to-save-dozens-of-hours-of-dead-code-maintenance"><a href="#run-it-occasionally-to-save-dozens-of-hours-of-dead-code-maintenance">Run it Occasionally to Save Dozens of Hours of Dead Code Maintenance</a></h3>
<p>I recommend it running from time to time in standalone thread, since it takes lot of performance and reports all unused public method, even those destined for public use:</p>
<pre><code class="language-yaml"># easy-coding-standard.neon
checkers:
    - Symplify\CodingStandard\Sniffs\DeadCode\UnusedPublicMethodSniff</code></pre>
<p>To make the first run collection effective, a <code>--clear-cache</code> option must be added:</p>
<pre><code class="language-bash">vendor/bin/ecs check src --clear-cache</code></pre>
<p><br></p>
<h3 id="do-you-want-more"><a href="#do-you-want-more">Do You Want More?</a></h3>
<p>There are <strong>over 30 standalone checkers</strong> in Symplify\CodingStandard 3.0 with more added every release.</p>
<p>See <a href="https://github.com/Symplify/CodingStandard#rules-overview">visual examples in <code>README</code></a> and decide for yourself, which you like and which you don't.</p>
<p>Thanks <a href="https://twitter.com/carusogabriel">@carusogabriel</a> for the <code>diff</code> idea in <code>README</code>. It's brilliant!</p>
<p><br><br></p>
<p>Happy fixing and sniffing!</p>

        <br>


    <hr class="mt-4 mb-lg-5">

    Do you want more on this topic? You might like these <strong>related posts</strong>:

        <a href="/blog/2017/08/07/7-new-features-in-easy-coding-standard-22">7 New Features in Easy Coding Standard 2.2</a>, 
        <a href="/blog/2017/12/17/new-in-symplify-3-doc-block-cleaner-fixer">New in Symplify 3: DocBlock Cleaner Fixer</a>

    <br>
    <br>

<div class="hireMe card border-info">
    <div class="card-body bg-info text-white text-center">
        <a href="/contact">
            Do you like what I write about? <strong>Hire me and I'll do it for you!</strong>
        </a>
    </div>
</div>


        <h3 id="what-do-you-think"><a href="#what-do-you-think">What do you think?</a></h3>

<div id="disqus_thread"></div>

<script type="text/javascript">
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//' + "itsworthsharing" + '.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
    </div>

    <script src="/assets/prism/prism.js"></script>
    <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>
        </div>

<script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', "UA-46082345-1", 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>
<script>
    !function(f,b,e,v,n,t,s){ if(f.fbq)return;n=f.fbq=function(){ n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
            document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', "201338863559186");
    fbq('track', 'PageView');
</script>
    </body>
</html>



    <meta property="og:type" content="article">
    <meta property="og:title" content="New in Symplify 3: 4 Time-saving Coding Standard Checkers">
    <meta property="og:description" content="Coding Standard in Symplify 3 brings checkers build from practical use in PHPStorm. It can do lot of work for you, like add getters, remove trailing spaces, but has still some room for automation and improvement.

I already wrote about doc block cleaner fixer and here 4 more checkers, that saves you from monkey-typing and let you focus on algorithms.">
    <meta property="og:url" content="https://www.tomasvotruba.cz/blog/2018/01/01/new-in-symplify-3-4-time-saving-coding-standard-checkers">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@votrubaT">
    <meta name="twitter:title" content="New in Symplify 3: 4 Time-saving Coding Standard Checkers">
    <meta name="twitter:description" content="Coding Standard in Symplify 3 brings checkers build from practical use in PHPStorm. It can do lot of work for you, like add getters, remove trailing spaces, but has still some room for automation and improvement.

I already wrote about doc block cleaner fixer and here 4 more checkers, that saves you from monkey-typing and let you focus on algorithms.">
